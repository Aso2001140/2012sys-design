```uml
@startuml

opt 未登録
ユーザー -> サイト : ユーザー登録
サイト -> DBサーバー : ユーザー登録
DBサーバー -> DBサーバー : 登録処理
DBサーバー -> サイト : 登録結果

alt 登録成功
サイト -> ユーザー : 登録メッセージを表示
else 登録失敗
サイト -> ユーザー : 失敗メッセージを表示

end
end

ユーザー -> サイト : ログイン
サイト -> DBサーバー : ログイン照会
DBサーバー -> DBサーバー : ログイン処理
DBサーバー -> サイト : 認証結果

activate ユーザー
alt 認証成功
サイト -> ユーザー : ユーザー名を表示
else 認証失敗
サイト -> ユーザー : 失敗メッセージを表示
end

opt ログイン中

ユーザー -> サイト : 高齢者

alt 高齢者
サイト -> DBサーバー : 高齢者用シューズの検索
DBサーバー -> DBサーバー : 検索処理
DBサーバー -> サイト : 検索結果
サイト -> ユーザー : 検索結果


ユーザー -> サイト : 検索（商品名）
サイト -> DBサーバー : 検索処理
DBサーバー -> DBサーバー : 検索処理
DBサーバー -> サイト : 検索結果
サイト -> ユーザー : 検索結果

ユーザー -> サイト : 商品を購入
サイト -> サイト : 合計の計算
サイト -> ユーザー : 合計金額の表示

ユーザー -> サイト : ログアウト
サイト -> DBサーバー : ログアウト照会
DBサーバー -> DBサーバー : ログアウト処理
DBサーバー -> サイト : ログアウト結果
サイト -> ユーザー : ログアウト結果
end

deactivate ユーザー


@enduml
```
